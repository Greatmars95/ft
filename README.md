# Quotopia - Real-time Quote Streaming Platform

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   UI (React)    ‚îÇ  ‚Üê –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React + Vite + TailwindCSS
‚îÇ   Port: 3001    ‚îÇ     –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP/REST
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   HT (Gin)      ‚îÇ  ‚Üê HTTP Gateway (REST ‚Üî gRPC –º–æ—Å—Ç)
‚îÇ   Port: 8080    ‚îÇ     –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã –≤ gRPC —Å—Ç—Ä–∏–º—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ gRPC Stream
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FT (gRPC)     ‚îÇ  ‚Üê Core Service - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ç–∏—Ä–æ–≤–æ–∫
‚îÇ   Port: 50051   ‚îÇ     –°—Ç—Ä–∏–º–∏—Ç –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ BTC, ETH, SBER
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FT (Quote Generator)**: Go + gRPC + Protocol Buffers
- **HT (HTTP Gateway)**: Go + Gin + gRPC Client
- **Auth Service**: Go + Gin + JWT + bcrypt
- **UI**: React 18 + Vite + TailwindCSS
- **Database**: PostgreSQL 16 + Adminer
- **Infrastructure**: Docker + Docker Compose + Nginx + Let's Encrypt

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make up

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ docker-compose
docker-compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3001`
- HT API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080/quotes`
- Auth Service –Ω–∞ `http://localhost:8090`
- FT gRPC —Å–µ—Ä–≤–µ—Ä –Ω–∞ `localhost:50051`
- **Adminer (–ë–î –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)** –Ω–∞ `http://localhost:8081`
- PostgreSQL –Ω–∞ `localhost:5432`

### Production (—Å –¥–æ–º–µ–Ω–∞–º–∏):
- `https://quotopia.com` - UI
- `https://api.quotopia.com` - API
- `https://auth.quotopia.com` - Auth Service
- `https://admin.quotopia.com` - Adminer (Basic Auth)

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
make down
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
make logs
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ft/
‚îú‚îÄ‚îÄ main.go                # FT - gRPC —Å–µ—Ä–≤–µ—Ä (–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ç–∏—Ä–æ–≤–æ–∫)
‚îú‚îÄ‚îÄ proto/
‚îÇ   ‚îî‚îÄ‚îÄ quotes.proto       # Protocol Buffers —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ ht/
‚îÇ   ‚îú‚îÄ‚îÄ main.go           # HT - HTTP Gateway
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ go.mod
‚îÇ   ‚îî‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx       # React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf        # Nginx –∫–æ–Ω—Ñ–∏–≥ —Å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile            # Dockerfile –¥–ª—è FT
‚îî‚îÄ‚îÄ Makefile             # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### FT (Quote Generator)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è BTC, ETH, SBER
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: ¬±0.1% –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç gRPC server-side streaming

### HT (HTTP Gateway)
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç HTTP GET `/quotes`
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç gRPC —Å—Ç—Ä–∏–º –∫ FT
- –°–æ–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞ 5 —Å–µ–∫—É–Ω–¥
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç CORS headers

### UI (Frontend)
- SPA –Ω–∞ React —Å Vite
- Polling –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/quotes` ‚Üí `ht:8080`

## üìù –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è proto —Ñ–∞–π–ª–æ–≤

```bash
make proto
```

### –ó–∞–ø—É—Å–∫ FT –ª–æ–∫–∞–ª—å–Ω–æ

```bash
make run
```

### –ó–∞–ø—É—Å–∫ HT –ª–æ–∫–∞–ª—å–Ω–æ

```bash
cd ht
go run main.go
```

### –ó–∞–ø—É—Å–∫ UI –ª–æ–∫–∞–ª—å–Ω–æ

```bash
cd ui
npm install
npm run dev
```

## üêõ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. ‚úÖ **HT —Å–µ—Ä–≤–∏—Å –Ω–µ –±—ã–ª –≤ docker-compose.yml** - –¥–æ–±–∞–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
2. ‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤** - HT —Ç–µ–ø–µ—Ä—å –Ω–∞ 8080, UI –ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. ‚úÖ **localhost –≤ Docker** - –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `ft:50051` —á–µ—Ä–µ–∑ env –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
4. ‚úÖ **Proto —Ñ–∞–π–ª—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ Dockerfile
5. ‚úÖ **–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–æ–¥—É–ª–∏ Go** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞ `ft-mt`
6. ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ nginx proxy** - —Å–æ–∑–¥–∞–Ω nginx.conf —Å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
7. ‚úÖ **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥** - —Ç–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
8. ‚úÖ **Docker build context** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
9. ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ç–∏** - —Å–æ–∑–¥–∞–Ω–∞ bridge —Å–µ—Ç—å `quotopia-net`

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- –î–æ–±–∞–≤–ª–µ–Ω `.dockerignore` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã CORS headers –≤ HT
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã make –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Docker Compose
- –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìä API

### GET /quotes

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏:

```json
[
  {
    "symbol": "BTC",
    "price": 95423.45,
    "timestamp": 1704988123456
  },
  {
    "symbol": "ETH",
    "price": 2651.32,
    "timestamp": 1704988123456
  },
  {
    "symbol": "SBER",
    "price": 275.67,
    "timestamp": 1704988123456
  }
]
```

## üîê –ü–æ—Ä—Ç—ã

- `3001` - UI (Nginx)
- `8080` - HT (HTTP Gateway)
- `8081` - Adminer (Database UI)
- `5432` - PostgreSQL
- `50051` - FT (gRPC Server)

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –î–æ—Å—Ç—É–ø –∫ PostgreSQL

**–ß–µ—Ä–µ–∑ Adminer (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å):**
```
URL: http://localhost:8081
Server: postgres
Username: admin
Password: secret123
Database: quotopia
```

**–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
make db-shell

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker exec -it quotopia-postgres psql -U admin -d quotopia
```

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. [docs/DATABASE.md](docs/DATABASE.md)

### –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- `admin@quotopia.com` / `admin123` (—Ä–æ–ª—å: admin)
- `trader@quotopia.com` / `admin123` (—Ä–æ–ª—å: trader)
- `user@quotopia.com` / `admin123` (—Ä–æ–ª—å: user)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- BTC (Bitcoin) - $95,400
- ETH (Ethereum) - $2,650
- SBER (–°–±–µ—Ä–±–∞–Ω–∫) - ‚ÇΩ275
- AAPL (Apple) - $185
- GOOGL (Google) - $142

## üìå TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å Prometheus metrics
- [ ] –î–æ–±–∞–≤–∏—Ç—å health checks
- [ ] –î–æ–±–∞–≤–∏—Ç—å graceful shutdown
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
- [ ] –î–æ–±–∞–≤–∏—Ç—å WebSocket –¥–ª—è real-time updates
- [ ] –î–æ–±–∞–≤–∏—Ç—å Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å CI/CD pipeline

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
