# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Quotopia

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ó–∞–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã

–ü–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ—Ä—Ç—ã **–ù–ï –æ—Ç–∫—Ä—ã—Ç—ã** –Ω–∞—Ä—É–∂—É:

```
‚ùå 5432 (PostgreSQL) - –ó–∞–∫—Ä—ã—Ç
‚ùå 8081 (Adminer)    - –ó–∞–∫—Ä—ã—Ç
```

**–ü–æ—á–µ–º—É:**
- PostgreSQL —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ - –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- Adminer - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ë–î, –æ–ø–∞—Å–Ω–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ–π

**–û—Ç–∫—Ä—ã—Ç—ã —Ç–æ–ª—å–∫–æ:**
```
‚úÖ 3001 (UI)    - React –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚úÖ 8080 (API)   - HTTP API –¥–ª—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫
‚úÖ 50051 (gRPC) - gRPC —Å–µ—Ä–≤–∏—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HT)
```

---

## üîå –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Adminer (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

### –°–ø–æ—Å–æ–± 1: SSH Tunnel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç—É–Ω–Ω–µ–ª—å
ssh -L 8081:localhost:8081 user@your-server -N

# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
# http://localhost:8081
```

**–õ–æ–≥–∏–Ω –≤ Adminer:**
- Server: `postgres`
- Username: `admin`
- Password: `secret123` (–°–ú–ï–ù–ò–¢–ï –≤ production!)
- Database: `quotopia`

### –°–ø–æ—Å–æ–± 2: Docker exec (–≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞)

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
ssh user@your-server

# –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
docker exec -it quotopia-postgres psql -U admin -d quotopia
```

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –∏ HTTPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

### –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ–º–µ–Ω (example.com)

**–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS**

–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏:
```
quotopia.example.com      ‚Üí your-server-ip
api.quotopia.example.com  ‚Üí your-server-ip
admin.quotopia.example.com ‚Üí your-server-ip
```

**–®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å Nginx + Let's Encrypt**

–°–º–æ—Ç—Ä–∏—Ç–µ: `docs/NGINX_SETUP.md`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ https://quotopia.example.com      (UI —Å SSL)
‚úÖ https://api.quotopia.example.com  (API —Å SSL)
‚úÖ https://admin.quotopia.example.com (Adminer —Å Basic Auth)
```

---

## üîê –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –î–ª—è Development

```yaml
# .env
POSTGRES_PASSWORD=secret123  # OK –¥–ª—è dev
```

### –î–ª—è Production (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```yaml
# .env.production
POSTGRES_PASSWORD=<—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å>
JWT_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É>
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π:**
```bash
# –°–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è PostgreSQL
openssl rand -base64 32

# JWT Secret
openssl rand -hex 64
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (‚úÖ –°–¥–µ–ª–∞–Ω–æ)

- [x] PostgreSQL –Ω–µ –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä—É–∂—É
- [x] Adminer –Ω–µ –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä—É–∂—É
- [ ] –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ë–î –Ω–∞ —Å–∏–ª—å–Ω—ã–µ
- [ ] –î–æ–±–∞–≤—å—Ç–µ .env —Ñ–∞–π–ª (–Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ!)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Production

- [ ] HTTPS –≤–µ–∑–¥–µ (Let's Encrypt)
- [ ] –î–æ–º–µ–Ω—ã –≤–º–µ—Å—Ç–æ IP:–ø–æ—Ä—Ç
- [ ] Basic Auth –Ω–∞ Adminer
- [ ] Rate limiting –Ω–∞ API
- [ ] Firewall (ufw/iptables)
- [ ] Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)

### Advanced Security

- [ ] JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Auth Service)
- [ ] Role-Based Access Control
- [ ] 2FA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- [ ] Audit logging
- [ ] WAF (Web Application Firewall)
- [ ] DDoS –∑–∞—â–∏—Ç–∞ (Cloudflare)

---

## üõ°Ô∏è Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### UFW (Ubuntu)

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH
sudo ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP/HTTPS (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ nginx)
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo ufw allow 3001/tcp  # UI
sudo ufw allow 8080/tcp  # API

# –ù–ï –û–¢–ö–†–´–í–ê–¢–¨:
# sudo ufw allow 5432/tcp  # PostgreSQL - –û–ü–ê–°–ù–û!
# sudo ufw allow 8081/tcp  # Adminer - –û–ü–ê–°–ù–û!

# –í–∫–ª—é—á–∏—Ç—å firewall
sudo ufw enable
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
nmap your-server-ip

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã —Ç–æ–ª—å–∫–æ:
# 22 (SSH)
# 80 (HTTP) - –µ—Å–ª–∏ nginx
# 443 (HTTPS) - –µ—Å–ª–∏ nginx
# 3001, 8080 - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∞–±—ã—Ö –ø–∞—Ä–æ–ª–µ–π

```bash
# –í–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞
docker exec quotopia-postgres psql -U admin -d quotopia -c "SELECT email FROM users;"

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ password_hash –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å $2a$ (bcrypt)
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Docker Security Best Practices](https://docs.docker.com/engine/security/)
- [PostgreSQL Security](https://www.postgresql.org/docs/current/security.html)

---

## üö® –í —Å–ª—É—á–∞–µ –≤–∑–ª–æ–º–∞

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã: `docker-compose down`
   - –°–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ë–î –∏–∑ –±—ç–∫–∞–ø–∞
   - –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –∏–∑ GitHub
   - –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã: `docker-compose up --build -d`

3. **–ê–Ω–∞–ª–∏–∑:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ audit logs –≤ –ë–î
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏: `/var/log/syslog`
   - –°–º–µ–Ω–∏—Ç–µ SSH –∫–ª—é—á–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
