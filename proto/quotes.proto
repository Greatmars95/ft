// ============================================
// Proto файл — это "договор" между сервисами
// Он описывает какие данные и как передаются
// ============================================

// Версия синтаксиса protobuf
syntax = "proto3";

// Пакет для генерируемого Go кода
// Это будет импортироваться в наших сервисах
option go_package = "gen/quotes";

// Определяем наш gRPC сервис
// Это как интерфейс в обычном программировании
service QuoteService {
  // StreamQuotes — метод который СТРИМИТ котировки
  // Server streaming = сервер отправляет поток данных клиенту
  // Клиент делает 1 запрос, сервер шлёт много ответов (как видео на YouTube)
  rpc StreamQuotes(StreamRequest) returns (stream Quote);
}

// Запрос для начала стриминга
// Empty = пустой запрос, просто говорим "хочу получать котировки"
message StreamRequest {
  // Можно добавить фильтры, например конкретные символы
  // Но пока оставим пустым — будем отправлять все котировки
}

// Структура одной котировки
// Это то, что FT будет слать Core'у каждую секунду
message Quote {
  string symbol = 1;      // Тикер (SBER, BTC, ETH)
  double price = 2;       // Цена
  int64 timestamp = 3;    // Unix timestamp в миллисекундах
}
